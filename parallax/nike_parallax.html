<!DOCTYPE html>


<html>
	<head>

		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="scripts/nbw-parallax.js"></script>
		<script type="text/javascript" src="scripts/jquery.localscroll-1.2.7-min.js"></script>
		<script type="text/javascript" src="scripts/jquery.scrollTo-1.4.2-min.js"></script>
		<script type="text/javascript" src="scripts/jquery.inview.js"></script>
		<script type="text/javascript">
		$(document).ready(function(){
		    $('#nav').localScroll();
		})
		</script>

	</head>
	
	<body>
		<div>
			<ul id="nav">
	    	<li><a href="#intro" title="Next Section"><img src="images/dot.png" alt="Link" /></a></li>
		    <li><a href="#second" title="Next Section"><img src="images/dot.png" alt="Link" /></a></li>
		    <li><a href="#third" title="Next Section"><img src="images/dot.png" alt="Link" /></a></li>
		    <li><a href="#fourth" title="Next Section"><img src="images/dot.png" alt="Link" /></a></li>
		    <li><a href="#fifth" title="Next Section"><img src="images/dot.png" alt="Link" /></a></li>
		</ul>
		</div>

		<div id="intro">
		    <div class="story">
		        Article content here
		    </div> <!--.story-->
		</div> <!--#intro-->

		<div id="second">
    		<div class="story">
        		<div class="bg">
        		</div>
            		Article content here
            		Article 2
			</div> <!--.story-->
		</div> <!--#second-->

		<script>
			var $window = $(window);
			var $firstBG = $('#intro');
			var $secondBG = $('#second');
			var $thirdBG = $('#third');
			var $fourthBG = $('#fourth');
			var trainers = $("#second .bg");
			var windowHeight = $window.height();

			$('#intro, #second, #third, #fourth').bind('inview', function (event, visible) {
    		if (visible == true) {
       			 $(this).addClass("inview");
    		}else{
      			$(this).removeClass("inview");
    		}
    		});

    		function RepositionNav(){
			    var windowHeight = $window.height();
			    var navHeight = $('#nav').height() / 2;
			    var windowCenter = (windowHeight / 2);
			    var newtop = windowCenter - navHeight;
			    $('#nav').css({"top": newtop});
			}
			function newPos(x, windowHeight, pos, adjuster, inertia){
			return x + "% " + (-((windowHeight + pos) - adjuster) * inertia)  + "px";
			}
			function Move(){
		    var pos = $window.scrollTop();
    		...
			}

			if($firstBG.hasClass("inview")){
			    $firstBG.css({'backgroundPosition': newPos(50, windowHeight, pos, 900, 0.3)});
			}

			$fourthBG.css({'backgroundPosition': newPos(0, windowHeight, pos, 200, 0.9) + ", " + newPos(50, windowHeight, pos, 0, 0.7) + ", " + newPos(50, windowHeight, pos, 0, 0.5) + ", " + newPos(50, windowHeight, pos, 700, 0.3)});
			$('#pixels').html(pos);

			$window.resize(function(){
			    Move();
			    RepositionNav();
			});

			$window.bind('scroll', function(){
			    Move();
			});

		</script>

		<div class="bg"></div>

	</body>
</html>
